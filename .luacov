-- -*- mode: lua; -*-
-- setting default behaviors for luacov. For documentation on the options,
-- see https://keplerproject.github.io/luacov/doc/modules/luacov.defaults.html

return {
    include = {
        "http$",
        "http%/async%-extras$",
        "http%/body$",
        "http%/builder$",
        "http%/client$",
        "http%/headers$",
        "http%/json$",
        "http%/parser$",
        "http%/readers$",
        "http%/tcp$",
        "http%/url$",
        "http%/uuid$",
    },
    exclude = {
        "http%/init$",
    },
    modules = {
        ["http.async-extras"] = "http/async-extras.fnl",
        ["http.body"] = "http/body.fnl",
        ["http.builder"] = "http/builder.fnl",
        ["http.client"] = "http/client.fnl",
        ["http.headers"] = "http/headers.fnl",
        ["http.json"] = "http/json.fnl",
        ["http.parser"] = "http/parser.fnl",
        ["http.readers"] = "http/readers.fnl",
        ["http.tcp"] = "http/tcp.fnl",
        ["http.url"] = "http/url.fnl",
        ["http.uuid"] = "http/uuid.fnl",
    },
    runreport = true,
    statsfile = "luacov.stats";
    reportfile = "luacov.report";
    cobertura = {
        filenameparser = function(filename)
            local name = filename:gsub("%.lua$", ".fnl")
            return name
        end,
    },
}
